<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="EnvyGuard - Control y monitoreo de dispositivos en tiempo real"
    />
    <link rel="icon" href="%PUBLIC_URL%/icon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="%PUBLIC_URL%/icon.ico" type="image/x-icon" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <meta name="theme-color" content="#0f172a" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="EnvyGuard" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>EnvyGuard</title>
  </head>
  <body>
    <noscript>Necesitas habilitar JavaScript para ejecutar esta aplicación.</noscript>
    <div id="root"></div>
    <script>
      // Registrar Service Worker para PWA
      if ('serviceWorker' in navigator) {
        // Usar ruta relativa que funciona en desarrollo y producción
        const swPath = window.location.pathname.startsWith('/dashboard') || 
                       window.location.pathname.startsWith('/login') ? 
                       '/' : window.location.pathname;
        
        navigator.serviceWorker.register('/service-worker.js', { scope: '/' })
          .then((registration) => {
            console.log('✓ Service Worker registrado:', registration);
            console.log('✓ PWA lista para instalar');
          })
          .catch((error) => {
            console.warn('⚠ Error registrando Service Worker:', error);
          });
      } else {
        console.warn('⚠ Service Worker no soportado en este navegador');
      }

      // Cargar script de debug en desarrollo (opcional)
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        const debugScript = document.createElement('script');
        debugScript.src = '/pwa-debug.js';
        debugScript.async = true;
        // document.head.appendChild(debugScript);
      }
    </script>
  </body>
</html>
